--- Modules/clinic/posixmodule.c.h
+++ Modules/clinic/posixmodule.c.h
@@ -92,6 +92,8 @@
     return return_value;
 }
 
+#if (defined(HAVE_ACCESS) || defined(HAVE_FACCESSAT))
+
 PyDoc_STRVAR(os_access__doc__,
 "access($module, /, path, mode, *, dir_fd=None, effective_ids=False,\n"
 "       follow_symlinks=True)\n"
@@ -161,6 +163,8 @@
     return return_value;
 }
 
+#endif /* (defined(HAVE_ACCESS) || defined(HAVE_FACCESSAT)) */
+
 #if defined(HAVE_TTYNAME)
 
 PyDoc_STRVAR(os_ttyname__doc__,
@@ -5665,6 +5669,10 @@
 
 #endif /* defined(HAVE_GETRANDOM_SYSCALL) */
 
+#ifndef OS_ACCESS_METHODDEF
+    #define OS_ACCESS_METHODDEF
+#endif /* !defined(OS_ACCESS_METHODDEF) */
+
 #ifndef OS_TTYNAME_METHODDEF
     #define OS_TTYNAME_METHODDEF
 #endif /* !defined(OS_TTYNAME_METHODDEF) */
--- Modules/posixmodule.c
+++ Modules/posixmodule.c
@@ -2440,6 +2440,7 @@
 }
 
 
+#if defined(HAVE_ACCESS) || defined(HAVE_FACCESSAT)
 /*[clinic input]
 os.access -> bool
 
@@ -2555,6 +2556,7 @@
 #ifndef X_OK
 #define X_OK 1
 #endif
+#endif /* HAVE_ACCESS || HAVE_FACCESSAT */
 
 
 #ifdef HAVE_TTYNAME
